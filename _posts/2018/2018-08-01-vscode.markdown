---
layout: post
title: VSCode
date: '2018-08-01 13:19'
subtitle: Debugging ROS2 Projects, Remote SSH 
comments: true
tags:
    - Linux
---

##  Set Up VSCode For ROS2 Development In Docker

[Reference](https://www.youtube.com/watch?v=j28aUHbT_c4) This feature really is an UI of running gdb on ROS2 projects.

1. Have your container running on your local machine.

2. Install `Dev Containers` by microsoft. Once installed, select "dev containers". Then you should be able to attach an instance to your container.
3. Install `C/C++`, `CMake Tools` in the running container

4. Make sure to set the workspace folder correctly `"workspaceFolder": "/home/mumble_robot"`, in [devcontainer.json](https://code.visualstudio.com/remote/advancedcontainers/change-default-source-mount)
    ```json
    {
        "extensions": [
            "github.copilot",
            "github.copilot-chat",
            "github.vscode-pull-request-github",
            "ms-vscode.cmake-tools",
            "ms-vscode.cpptools",
            "ms-vscode.cpptools-extension-pack",
            "ms-vscode.cpptools-themes",
            "twxs.cmake"
        ],
        "workspaceFolder": "/home/mumble_robot"
    }
    ``` 
    - Press `Ctrl+Shift+P` (or Cmd+Shift+P on macOS) to open the Command Palette, then type and select “Dev Containers: Open Dev Container Configuration File”. This command will open your devcontainer.json directly.

1. Create `${"workspaceFolder"}/.vscode`, then add `launch.json` 
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug My Executable",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/build/halo/halo_tests",
      "args": [],
      "stopAtEntry": false,
      "cwd": "/home/mumble_robot", // explicitly set your working directory here
      "environment": [],
      "externalConsole": false,
      "MIMode": "gdb",
      "miDebuggerPath": "/usr/bin/gdb",
      "preLaunchTask": "colcon build"
    }
  ]
}
```
5. And `${"workspaceFolder"}/tasks.json`

```json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "colcon build",
            "type": "shell",
            "command": "colcon build --cmake-args DCMAKE_BUILD_TYPE=Debug --symlink-install",
            "options": {
                "cwd": "/home/mumble_robot"
            },
            "group": "build",
            "presentation": {
                "reveal": "always",
                "echo": true
            },
            "problemMatcher": []
        },
        {
            "type": "cppbuild",
            "label": "C/C++: gcc build active file",
            "command": "/usr/lib/ccache/gcc",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ]
}
```
    - **REMEMBER to set path to your executable**
6. Set break points in a file, then hit `<F5>` to start the debug program. (the triangular button for debugging did not work)


## Remote SSH Configuration

- Configuration `~/.ssh/config`

```bash
Host <HOSTNAME>
    HostName <IP>
    User <USER_NAME>
    Port 22
```

- To enable Python module clicking, go to extensions -> click `"install on <HOST>"` on python extension (10-15MB, typically less than 1-2%)
